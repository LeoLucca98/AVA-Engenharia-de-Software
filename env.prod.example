# AVA Microservices - Production Environment
# Copie para .env e ajuste conforme seu domínio/infra.

# =============================================================================
# DJANGO SETTINGS
# =============================================================================
DEBUG=False
DEVELOPMENT_MODE=False
SECRET_KEY=please-change-to-a-strong-secret
# Inclua o(s) domínio(s) públicos do gateway e dos serviços quando acessados diretamente
ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com,localhost,127.0.0.1,auth_service,learning_service,recommendation_service,api-gateway

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
DB_USER=postgres
DB_PASSWORD=change-me-strong-password

AUTH_DB_NAME=auth_service
LEARNING_DB_NAME=learning_service
RECOMMENDATION_DB_NAME=recommendation_service

# =============================================================================
# API GATEWAY SETTINGS
# =============================================================================
# Origins que podem acessar o gateway (frontend web, apps, etc.)
# Ex.: https://app.yourdomain.com,https://yourdomain.com
ALLOWED_ORIGINS=https://app.yourdomain.com,https://yourdomain.com

# URLs internas (Docker overlay)
AUTH_SERVICE_URL=http://auth_service:8000
LEARNING_SERVICE_URL=http://learning_service:8000
RECOMMENDATION_SERVICE_URL=http://recommendation_service:8000

# JWKS do Auth exposto pelo gateway (evita host com underscore)
# Ajuste para o domínio público do gateway em produção
AUTH_SERVICE_JWKS_URL=https://api.yourdomain.com/auth/.well-known/jwks.json

# =============================================================================
# SERVICE COMMUNICATION
# =============================================================================
AUTH_SERVICE_INTERNAL_URL=http://auth_service:8000
LEARNING_SERVICE_INTERNAL_URL=http://learning_service:8000
RECOMMENDATION_SERVICE_INTERNAL_URL=http://recommendation_service:8000

# =============================================================================
# JWT SETTINGS
# =============================================================================
JWT_ALGORITHM=RS256
JWT_AUDIENCE=ava-microservices
JWT_ISSUER=ava-auth-service
JWT_ACCESS_TOKEN_LIFETIME=3600
JWT_REFRESH_TOKEN_LIFETIME=604800

# =============================================================================
# CORS SETTINGS
# =============================================================================
CORS_ALLOWED_ORIGINS=https://app.yourdomain.com,https://yourdomain.com
CORS_ALLOW_CREDENTIALS=True

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=verbose
